![[Pasted image 20250121172910.png]]
# 系统软件

## 系统SDK维护

### J3&J5

地平线征程系列芯片，涉及公司内部项目（自研APA）和客户量产项目（哪吒 APA、星宇 行泊一体），工作主要围绕 J3/J5 原生SDK展开。

平台特点：
* arm64 linux系统，主要使用A核 + BPU（地平线自研）
* 基本开源，部分代码不开源，如：地平线图像处理组件、BPU组件

工作项：
* 目标平台上，部分外设 原生的SDK不支持，如：相机、ddr、phy；或者硬件设计与地平线推荐设计不一致。此时，需要在原生SDK上进行修改和调配
* 地平线系统组件的使用，如相机相关的VCU
* 基于目标项目的客制化配置，如网络配置、分区配置等
* 软件集成，应用需要与系统软件一起打包，涉及到编译脚本、刷写脚本的编写。

### TDA4
TI 智驾领域的多核异构芯片，涉及客户量产项目（上汽大通 APA）

平台特点：
* arm64 linux 系统，使用A核、M核、C71（AI）、DSP、GPU等，结构复杂
* 非原生SDK，在Tier one（Freetech）提供的SDK基础上进行二次开发，TI 本身

注：内核、驱动的维护由Tier one承担，我们不负责
工作项：



# 应用开发

主要基于C、C++开发，也涉及python、make、cmake等脚本语言的支持

## APA

自动泊车软件，映驰主流业务线，以平台自研APA产品为主，衍生了多个APA量产产品（哪吒、上汽）以及 HPA、RPA、行泊一体、仓泊一体等复合产品。
* 已部署多个硬件平台：J3、TDA4（唯二量产）、orin、J5、x9sp等
* 基于公司自研中间件（EMOS）开发，深度绑定
* 通常分为SOC、MCU两部分
* 涉及开发人员众多，包括了算法、中间件、平台、测试

APA流程（个人理解）：
4路环视相机 -> bev拼接&前处理 -> （嵌入式）深度学习运算 -> 运算结果后处理&语义融合 -> 路径规划 -> 路径实施


目前本人涉及的组件：
### 相机及图像处理组件
主要工作：
* 相机服务，获取图像输入，并将图像送给后续引用
* 图像处理，将四路图像进行去畸变、拼接等操作，生成符合算法输入的俯视拼接图和柱面图。
### 模型调度组件
主要工作：
* 嵌入式模型转换
* APA 运行时模型调度
### 片间通信（MCU-SOC）
* 基于ETH、SPI、IPCF等方法，实现统一的片间通信接口（emdc）。以ETH为主（二层自定义协议）
* emdc特点：有校验，无连接，无重传。结构简洁
### 调试组件（描画、通信）
* 原生代码实现的APA俯视角信息描画，包括库位、障碍物、边界等
* 与调试上位机通信组件（udp），可实现简单的远程操作

## 时间同步

公司自研的时间同步软件，基于 802.1.AS （gptp）域内多节点的时间同步






面经：
* emdc设计初衷：主要由于早期M核rtos未部署UDP
* 





